<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Entry Survey</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="survey.css">
</head>
<body>
    <script>
        const user = JSON.parse(sessionStorage.getItem('user'));
        if (!user) {
            window.location.href = 'login.html';
        } else if (user.role !== 'enumerator' && user.role !== 'admin') {
            window.location.href = 'index.html';
        }
    </script>
    <header>
        <div class="header-top">
            <img src="surveylogo.jpeg" alt="Lagos State Logo">
            <h1>Lagos State EDUCATION MANAGEMENT INFORMATION SYSTEM (EMIS)</h1>
            <button class="hamburger-menu">
                &#9776;
            </button>
        </div>
        <nav>
            <ul>
                <li><a href="/">Dashboard</a></li>
                <li><a href="/users">Users</a></li>
                <li><a href="/profile">Profile</a></li>
                <li><a href="/reports">Reports</a></li>
                <li><a href="/audit-log">Audit Log</a></li>
                <li><a href="/forms">School Census Forms</a></li>
                <li><button id="logout-button">Logout</button></li>
            </ul>
        </nav>
    </header>
    <main>
        <form id="surveyForm">
            <h2>SECTION A: SCHOOL DATA</h2>
            <div>
                <label for="ownership">Ownership:</label>
                <select id="ownership" name="ownership" required>
                    <option value="">Select Ownership</option>
                    <option value="Public">Public</option>
                    <option value="Private">Private</option>
                </select>
            </div>
            <div id="private-specifics" style="display: none;">
                <label for="private-type">If Private:</label>
                <select id="private-type" name="private-type">
                    <option value="">Select Type</option>
                    <option value="NGO">NGO</option>
                    <option value="Association">Association</option>
                    <option value="Community Based">Community Based</option>
                    <option value="Religious Institution">Religious Institution</option>
                    <option value="Others">Others</option>
                </select>
            </div>
            <div id="private-other-specify" style="display: none;">
                <label for="private-other">Specify:</label>
                <input type="text" id="private-other" name="private-other">
            </div>
            <div>
                <label for="institutionType">Institution Type:</label>
                <select id="institutionType" name="institutionType" required>
                    <option value="">Select Institution Type</option>
                    <option value="Pre-Primary & Primary School">Pre-Primary & Primary School</option>
                    <option value="Junior Secondary School">Junior Secondary School</option>
                    <option value="Senior Secondary School">Senior Secondary School</option>
                </select>
            </div>
            <div>
                <label for="lga">Local Govt:</label>
                <select id="lga" name="lgea" required>
                    <option value="">Select LGA</option>
                </select>
            </div>
            <div>
                <label for="ward">Ward:</label>
                <select id="ward" name="ward" required>
                    <option value="">Select Ward</option>
                </select>
            </div>
            <div>
                <label for="schoolName">Name of School</label>
                <input type="text" id="schoolName" name="schoolName" required>
            </div>
            <div>
                <label for="address">Address</label>
                <input type="text" id="address" name="schoolAddress" required>
            </div>
            <div>
                <label for="latitude">Latitude</label>
                <input type="text" id="latitude" name="latitude" required>
            </div>
            <div>
                <label for="longitude">Longitude</label>
                <input type="text" id="longitude" name="longitude" required>
            </div>
            <!-- The getLocation() function is defined in survey.js -->
            <button type="button" onclick="getLocation()">Get Geolocation</button>

            <h2>Section B: School/Institution Data</h2>
            <h3>Pre-Primary & Primary School:</h3>
            <table id="prePrimarySchool">
                <thead>
                    <tr>
                        <th rowspan="2">CLASS</th>
                        <th rowspan="2">NO. OF STREAM</th>
                        <th colspan="3" style="text-align:center">SEX</th>
                    </tr>
                    <tr>
                        <th>MALE</th>
                        <th>FEMALE</th>
                        <th>TOTAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>NURSERY 1</td>
                        <td><input type="number" name="prePrimary_nursery1_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_nursery1_male" min="0"></td>
                        <td><input type="number" name="prePrimary_nursery1_female" min="0"></td>
                        <td><input type="number" name="prePrimary_nursery1_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>NURSERY 2</td>
                        <td><input type="number" name="prePrimary_nursery2_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_nursery2_male" min="0"></td>
                        <td><input type="number" name="prePrimary_nursery2_female" min="0"></td>
                        <td><input type="number" name="prePrimary_nursery2_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>KINDERGARTIN</td>
                        <td><input type="number" name="prePrimary_kindergartin_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_kindergartin_male" min="0"></td>
                        <td><input type="number" name="prePrimary_kindergartin_female" min="0"></td>
                        <td><input type="number" name="prePrimary_kindergartin_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>PRIMARY 1</td>
                        <td><input type="number" name="prePrimary_primary1_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_primary1_male" min="0"></td>
                        <td><input type="number" name="prePrimary_primary1_female" min="0"></td>
                        <td><input type="number" name="prePrimary_primary1_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>PRIMARY 2</td>
                        <td><input type="number" name="prePrimary_primary2_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_primary2_male" min="0"></td>
                        <td><input type="number" name="prePrimary_primary2_female" min="0"></td>
                        <td><input type="number" name="prePrimary_primary2_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>PRIMARY 3</td>
                        <td><input type="number" name="prePrimary_primary3_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_primary3_male" min="0"></td>
                        <td><input type="number" name="prePrimary_primary3_female" min="0"></td>
                        <td><input type="number" name="prePrimary_primary3_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>PRIMARY 4</td>
                        <td><input type="number" name="prePrimary_primary4_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_primary4_male" min="0"></td>
                        <td><input type="number" name="prePrimary_primary4_female" min="0"></td>
                        <td><input type="number" name="prePrimary_primary4_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>PRIMARY 5</td>
                        <td><input type="number" name="prePrimary_primary5_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_primary5_male" min="0"></td>
                        <td><input type="number" name="prePrimary_primary5_female" min="0"></td>
                        <td><input type="number" name="prePrimary_primary5_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>PRIMARY 6</td>
                        <td><input type="number" name="prePrimary_primary6_streams" min="0"></td>
                        <td><input type="number" name="prePrimary_primary6_male" min="0"></td>
                        <td><input type="number" name="prePrimary_primary6_female" min="0"></td>
                        <td><input type="number" name="prePrimary_primary6_total" readonly min="0"></td>
                    </tr>
                </tbody>
            </table>

            <h3>Junior Secondary School:</h3>
            <table id="juniorSecondarySchool">
                <thead>
                    <tr>
                        <th rowspan="2">CLASS</th>
                        <th rowspan="2">NO. OF STREAM</th>
                        <th colspan="3" style="text-align:center">SEX</th>
                    </tr>
                    <tr>
                        <th>MALE</th>
                        <th>FEMALE</th>
                        <th>TOTAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>JSS1</td>
                        <td><input type="number" name="jss1_streams" min="0"></td>
                        <td><input type="number" name="jss1_male" min="0"></td>
                        <td><input type="number" name="jss1_female" min="0"></td>
                        <td><input type="number" name="jss1_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>JSS2</td>
                        <td><input type="number" name="jss2_streams" min="0"></td>
                        <td><input type="number" name="jss2_male" min="0"></td>
                        <td><input type="number" name="jss2_female" min="0"></td>
                        <td><input type="number" name="jss2_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>JSS3</td>
                        <td><input type="number" name="jss3_streams" min="0"></td>
                        <td><input type="number" name="jss3_male" min="0"></td>
                        <td><input type="number" name="jss3_female" min="0"></td>
                        <td><input type="number" name="jss3_total" readonly min="0"></td>
                    </tr>
                </tbody>
            </table>

            <h3>Senior Secondary School:</h3>
            <table id="seniorSecondarySchool">
                <thead>
                    <tr>
                        <th rowspan="2">CLASS</th>
                        <th rowspan="2">NO. OF STREAM</th>
                        <th colspan="3" style="text-align:center">SEX</th>
                    </tr>
                    <tr>
                        <th>MALE</th>
                        <th>FEMALE</th>
                        <th>TOTAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>SSS1</td>
                        <td><input type="number" name="sss1_streams" min="0"></td>
                        <td><input type="number" name="sss1_male" min="0"></td>
                        <td><input type="number" name="sss1_female" min="0"></td>
                        <td><input type="number" name="sss1_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>SSS2</td>
                        <td><input type="number" name="sss2_streams" min="0"></td>
                        <td><input type="number" name="sss2_male" min="0"></td>
                        <td><input type="number" name="sss2_female" min="0"></td>
                        <td><input type="number" name="sss2_total" readonly min="0"></td>
                    </tr>
                    <tr>
                        <td>SSS3</td>
                        <td><input type="number" name="sss3_streams" min="0"></td>
                        <td><input type="number" name="sss3_male" min="0"></td>
                        <td><input type="number" name="sss3_female" min="0"></td>
                        <td><input type="number" name="sss3_total" readonly min="0"></td>
                    </tr>
                </tbody>
            </table>

            <h3>Special Learners:</h3>
            <table id="specialLearners">
                <thead>
                    <tr>
                        <th>CLASS (DROP DOWN)</th>
                        <th>MALE</th>
                        <th>FEMALE</th>
                        <th>TOTAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <select name="specialLearners_class_1">
                                <option value="">Select Class</option>
                                <option value="NURSERY 1">NURSERY 1</option>
                                <option value="NURSERY 2">NURSERY 2</option>
                                <option value="KINDERGARTIN">KINDERGARTIN</option>
                                <option value="PRIMARY 1">PRIMARY 1</option>
                                <option value="PRIMARY 2">PRIMARY 2</option>
                                <option value="PRIMARY 3">PRIMARY 3</option>
                                <option value="PRIMARY 4">PRIMARY 4</option>
                                <option value="PRIMARY 5">PRIMARY 5</option>
                                <option value="PRIMARY 6">PRIMARY 6</option>
                                <option value="JSS1">JSS1</option>
                                <option value="JSS2">JSS2</option>
                                <option value="JSS3">JSS3</option>
                                <option value="SSS1">SSS1</option>
                                <option value="SSS2">SSS2</option>
                                <option value="SSS3">SSS3</option>
                            </select>
                        </td>
                        <td><input type="number" name="specialLearners_male_1" min="0"></td>
                        <td><input type="number" name="specialLearners_female_1" min="0"></td>
                        <td><input type="number" name="specialLearners_total_1" readonly min="0"></td>
                    </tr>
                </tbody>
            </table>
            <button type="button" id="addSpecialLearnerRow">Add Row</button>


            <h2>Section C: STAFF</h2>
            <h3>Number of Teachers in the School:</h3>
            <div>
                <label for="teachersMale">Male *</label>
                <input type="number" id="teachersMale" name="teachersMale" required min="0">
            </div>
            <div>
                <label for="teachersFemale">Female *</label>
                <input type="number" id="teachersFemale" name="teachersFemale" required min="0">
            </div>
            <div>
                <label for="teachersTotal">Total</label>
                <input type="number" id="teachersTotal" name="teachersTotal" readonly min="0">
            </div>

            <h3>Number of Non-Teaching Staff in the School:</h3>
            <div>
                <label for="nonTeachingMale">Male *</label>
                <input type="number" id="nonTeachingMale" name="nonTeachingMale" required min="0">
            </div>
            <div>
                <label for="nonTeachingFemale">Female *</label>
                <input type="number" id="nonTeachingFemale" name="nonTeachingFemale" required min="0">
            </div>
            <div>
                <label for="nonTeachingTotal">Total</label>
                <input type="number" id="nonTeachingTotal" name="nonTeachingTotal" readonly min="0">
            </div>

            <h3>STAFF PROFILE</h3>
            <table>
                <thead>
                    <tr>
                        <th>NAME OF STAFF</th>
                        <th>HIGHEST QUALIFICATION</th>
                        <th>SUBJECT SPECIALISATION</th>
                        <th>YEARS OF EXPEREINCE</th>
                        <th>TRCN NO (IF AVAILABLE)</th>
                    </tr>
                </thead>
                <tbody id="staffProfileTableBody">
                    <!-- Staff rows will be added here dynamically -->
                </tbody>
            </table>
            <button type="button" id="addStaffRow">Add Staff</button>

            <h2>Section D: School Infrastructure</h2>
            <h3>1. INFRASTRUCTURE</h3>
            <div>
                <p>Signboard *</p>
                <input type="radio" id="signboardGood" name="signboard" value="good" required>
                <label for="signboardGood">Available and in good condition</label><br>
                <input type="radio" id="signboardNotGood" name="signboard" value="not_good">
                <label for="signboardNotGood">Available but not in good condition</label><br>
                <input type="radio" id="signboardNotAvailable" name="signboard" value="not_available">
                <label for="signboardNotAvailable">Not Available</label>
            </div>

            <h3>Teachers’ Furniture</h3>
            <div>
                <label for="teachersFurnitureAvailable">Number Available *</label>
                <input type="number" id="teachersFurnitureAvailable" name="teachersFurnitureAvailable" required min="0">
            </div>
            <div>
                <label for="teachersFurnitureGood">Number in Good Condition *</label>
                <input type="number" id="teachersFurnitureGood" name="teachersFurnitureGood" required min="0">
            </div>
            <div>
                <label for="teachersFurnitureRequired">Additional Number Required *</label>
                <input type="number" id="teachersFurnitureRequired" name="teachersFurnitureRequired" required min="0">
            </div>

            <h3>ECCDE Furniture</h3>
            <div>
                <label for="eccdeFurnitureAvailable">Number Available *</label>
                <input type="number" id="eccdeFurnitureAvailable" name="eccdeFurnitureAvailable" required min="0">
            </div>
            <div>
                <label for="eccdeFurnitureGood">Number in Good Condition *</label>
                <input type="number" id="eccdeFurnitureGood" name="eccdeFurnitureGood" required min="0">
            </div>
            <div>
                <label for="eccdeFurnitureRequired">Additional Number Required *</label>
                <input type="number" id="eccdeFurnitureRequired" name="eccdeFurnitureRequired" required min="0">
            </div>

            <h3>Primary Furniture</h3>
            <div>
                <label for="primaryFurnitureAvailable">Number Available *</label>
                <input type="number" id="primaryFurnitureAvailable" name="primaryFurnitureAvailable" required min="0">
            </div>
            <div>
                <label for="primaryFurnitureGood">Number in Good Condition *</label>
                <input type="number" id="primaryFurnitureGood" name="primaryFurnitureGood" required min="0">
            </div>
            <div>
                <label for="primaryFurnitureRequired">Additional Number Required *</label>
                <input type="number" id="primaryFurnitureRequired" name="primaryFurnitureRequired" required min="0">
            </div>

            <h3>2. FENCING</h3>
            <div>
                <p>a. Shared Facility</p>
                <p>Is the school located within a school Complex? *</p>
                <input type="radio" name="sharedFacility" value="yes" required> Yes
                <input type="radio" name="sharedFacility" value="no"> No
            </div>
            <div>
                <p>b. Does the school have perimeter fence: *</p>
                <input type="radio" name="perimeterFence" value="yes" required> Yes
                <input type="radio" name="perimeterFence" value="no"> No
            </div>

            <h3>Classroom Condition</h3>
            <div>
                <label for="classroomsAvailable">Number Available *</label>
                <input type="number" id="classroomsAvailable" name="classroomsAvailable" required min="0">
            </div>
            <div>
                <label for="classroomsGood">Number in Good Condition *</label>
                <input type="number" id="classroomsGood" name="classroomsGood" required min="0">
            </div>
            <div>
                <label for="classroomsMinorRepair">Number in need of Minor Repair *</label>
                <input type="number" id="classroomsMinorRepair" name="classroomsMinorRepair" required min="0">
            </div>
            <div>
                <label for="classroomsMajorRepair">Number in need of Major Repair/Renovation *</label>
                <input type="number" id="classroomsMajorRepair" name="classroomsMajorRepair" required min="0">
            </div>
            <div>
                <label for="classroomsRequired">Number of Additional Classroom Required *</label>
                <input type="number" id="classroomsRequired" name="classroomsRequired" required min="0">
            </div>
            <div>
                <label for="repairDescription">Briefly, describe the type of repair needed</label>
                <textarea id="repairDescription" name="repairDescription"></textarea>
            </div>

            <h3>3. TOILET FACILITIES</h3>
            <div>
                <p>Type of Toilet: *</p>
                <input type="radio" id="toiletPit" name="toiletType" value="pit" required> <label for="toiletPit">Pit</label><br>
                <input type="radio" id="toiletWC" name="toiletType" value="wc"> <label for="toiletWC">WC</label><br>
                <input type="radio" id="toiletSquat" name="toiletType" value="squat"> <label for="toiletSquat">Squat Water flush</label><br>
                <input type="radio" id="toiletNone" name="toiletType" value="none"> <label for="toiletNone">None</label>
            </div>
            <div>
                <label for="cubicleAvailable">Number of Cubicle Toilet Available *</label>
                <input type="number" id="cubicleAvailable" name="cubicleAvailable" required min="0">
            </div>
            <div>
                <label for="cubicleMinorRepair">Number in need of Minor Repair *</label>
                <input type="number" id="cubicleMinorRepair" name="cubicleMinorRepair" required min="0">
            </div>
            <div>
                <label for="cubicleMajorRepair">Number in need of Major Repair *</label>
                <input type="number" id="cubicleMajorRepair" name="cubicleMajorRepair" required min="0">
            </div>
            <div>
                <label for="cubicleRenovation">Renovation Required *</label>
                <input type="number" id="cubicleRenovation" name="cubicleRenovation" required min="0">
            </div>
            <div>
                <label for="cubicleRequired">Number of Additional Cubicle Toilet Required *</label>
                <input type="number" id="cubicleRequired" name="cubicleRequired" required min="0">
            </div>
            <div>
                <label for="toiletRepairDescription">Briefly, describe the type of repair needed</label>
                <textarea id="toiletRepairDescription" name="toiletRepairDescription"></textarea>
            </div>

            <h3>4. SEPTIC TANK</h3>
            <div>
                <input type="radio" name="septicTank" value="available" required> Available
                <input type="radio" name="septicTank" value="not_available"> Not Available
                <input type="radio" name="septicTank" value="needs_evacuation"> Needs Evacuation
            </div>

            <h3>5. SOURCE OF POTABLE WATER</h3>
            <div>
                <input type="radio" name="waterSource" value="none" required> None
                <input type="radio" name="waterSource" value="well"> Well
                <input type="radio" name="waterSource" value="tap"> Tap Water
                <input type="radio" name="waterSource" value="borehole"> Borehole
            </div>
            <div>
                <label for="recommendations">Recommendations</label>
                <textarea id="recommendations" name="recommendations"></textarea>
            </div>

            <h3>6. SOURCE OF ELECTRICITY</h3>
            <div>
                <p>Source of Electricity: *</p>
                <input type="radio" id="electricityNone" name="electricity" value="none" required> <label for="electricityNone">None</label><br>
                <input type="radio" id="electricityPhcn" name="electricity" value="phcn"> <label for="electricityPhcn">PHCN</label><br>
                <input type="radio" id="electricityGenerator" name="electricity" value="generator"> <label for="electricityGenerator">Generator</label><br>
                <input type="radio" id="electricitySolar" name="electricity" value="solar"> <label for="electricitySolar">Solar</label><br>
                <input type="radio" id="electricityOther" name="electricity" value="other"> <label for="electricityOther">Others</label><br>
                <input type="radio" id="electricityDisconnectedBills" name="electricity" value="disconnected_bills"> <label for="electricityDisconnectedBills">PHCN but Disconnected because of accumulated bills</label><br>
                <input type="radio" id="electricityDisconnectedMeter" name="electricity" value="disconnected_meter"> <label for="electricityDisconnectedMeter">PHCN but Disconnected because of lack of meter</label>
            </div>

            <div>
                <p>7. Is your School regularly waterlogged when it rained? *</p>
                <input type="radio" name="waterlogged" value="yes" required> Yes
                <input type="radio" name="waterlogged" value="no"> No
            </div>

            <div>
                <label for="photos">Upload Photos (Max 10) *</label>
                <input type="file" id="photos" name="photos" multiple accept="image/*" required>
            </div>

            <!-- The Modal -->
            <div id="successModal" class="modal">
                <!-- Modal content -->
                <div class="modal-content">
                    <p id="success-message"></p>
                </div>
            </div>
            <button type="submit">Submit Data Entry Form</button>
        </form>
    </main>
    <footer>
        <p>Lagos State Universal Basic Education Board © 2025. All Rights Reserved. | Centre of Excellence</p>
    </footer>
    <script src="survey.js"></script>
</body>
</html>
